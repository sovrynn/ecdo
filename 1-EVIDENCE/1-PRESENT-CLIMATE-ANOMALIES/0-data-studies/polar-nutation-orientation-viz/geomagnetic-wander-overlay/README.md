# Polar nutation and geomagnetic pole wander overlay viz

First arg: NP.txt (1590 - now)

The magnetic poles or dip poles are computed from all the Gauss coefficients using an iterative method. Magnetic poles derived in this fashion are geographically closer to the experimentally observed poles. Based on the current WMM, the 2020 location of the North Magnetic Pole is 86.50째N and 164.04째E and the South Magnetic Pole is 64.07째S and 135.88째E.

https://www.ncei.noaa.gov/products/wandering-geomagnetic-poles

Second arg: Polar nutation data (MJD, 1845 - now)

Earth rotation: https://www.iers.org/IERS/EN/Science/EarthRotation/EOP.html

Polar motion: https://www.iers.org/IERS/EN/Science/EarthRotation/PolarMotion.html-1.htm?nn=12932

1962 1997 mean rotation axis: https://www.iers.org/IERS/EN/Science/EarthRotation/CoordinatesMeanRotationAxis.html?nn=12932

I could try taking the MJD data and forming a 

## Prompt

Write a python script that does the following. IT should take two input args, relative filenames X and Y. IT should read X's contents into code. The data is one row per line, in the format "LON LAT YEAR", where LON is the longitude (float) LAT is the latitude (float) and YEAR is a 4 digit integer, year, although it has 2 decimal points (always 0) in the file. It should also read Y's contents into code. Starting at the 14th line (inclusive), it should parse each line as a series of words (separated by spaces, potentially multiple). Each line represents one data point. The first "word" in each line is a float, date, MJD format, days since November 17, 1858, potentially negative. The second is the x coordinate, and the third is the y coordinate.

I want you to graph both of these on the same 2d axis, but they both have to be altered first.

The firts data needs to be modified in the following steps:

1. First of all, all rows with YEAR (third column) before year 1850 should be discarded.
2. Then the data should be normalized so that rather than an absolute lat/lon, it's shifted so that the first data point (year 1850) is considered 0,0, and all the other coordinates become offsets from that point.
3. Again the data needs to be changed so that instead of lat/lon, the lat/lon offsets are converted to coordinate offsets. The longitude offset should give the bearing, with positive x axis being 90 east, negative x axis being 270 east, and so on. The latitude offset will give the distance traveled along the bearing. You'll probably have to use trig to do this.
4. Finally the data again needs to be normalized so the biggest x/y absolute value has a value of 1, bringing all the x/y values within the scale [-1,1].

Print out all the yearly values for each step in this process. This should be done in the form one row per line, "DATE LAT LON" or "DATE X Y".

The second data needs to be filtered and the date needs to be scaled:
1. First off, convert all the dates (first column) to AD format, including month and day. THen, starting from the earliest date, only include the date that is 365.25 days after it, or whichever is closest. Discard the rest.
2. Then, replace the data with a 5-year moving average so it starts from 1850.
3. Then I need you to switch the x and y values and multiply them both by -1.

Print out all the yearly values for each step in this process, in the same format as the first file.

Then plot both the datasets on a 2d axis centered at the origin going from -1 to 1 on each axis. I want you to add a color gradient to both plot lines, based on the date. Make the first gradient bright tone and the second dark tone so they have different gradients. Add a legend.

Save the plot to output.png.

# Data

```
## Dataset X:

1845 263.301 69.42
1846 263.287 69.379
1847 263.27 69.341
1848 263.251 69.311
1849 263.231 69.288
1850 263.215 69.271
1851 263.206 69.259
1852 263.203 69.249
1853 263.204 69.24
1854 263.208 69.23
1855 263.214 69.219
1856 263.221 69.205
1857 263.229 69.192
1858 263.238 69.18
1859 263.243 69.174
1860 263.237 69.178
1861 263.211 69.196
1862 263.174 69.225
1863 263.135 69.259
1864 263.101 69.296
1865 263.076 69.336
1866 263.066 69.375
1867 263.063 69.414
1868 263.062 69.455
1869 263.056 69.496
1870 263.044 69.536
1871 263.025 69.575
1872 263.004 69.615
1873 262.986 69.659
1874 262.968 69.708
1875 262.942 69.76
1876 262.9 69.812
1877 262.847 69.863
1878 262.789 69.914
1879 262.733 69.964
1880 262.686 70.013
1881 262.652 70.061
1882 262.628 70.111
1883 262.611 70.163
1884 262.598 70.218
1885 262.591 70.276
1886 262.589 70.335
1887 262.59 70.394
1888 262.59 70.448
1889 262.585 70.497
1890 262.574 70.546
1891 262.606 70.584
1892 262.718 70.6
1893 262.894 70.592
1894 263.11 70.564
1895 263.338 70.525
1896 263.547 70.483
1897 263.712 70.449
1898 263.813 70.43
1899 263.845 70.433
1900 263.814 70.46
1901 263.756 70.499
1902 263.697 70.539
1903 263.638 70.578
1904 263.579 70.618
1905 263.52 70.657
1906 263.472 70.683
1907 263.424 70.708
1908 263.376 70.734
1909 263.328 70.76
1910 263.28 70.785
1911 263.218 70.834
1912 263.156 70.883
1913 263.094 70.931
1914 263.031 70.981
1915 262.968 71.03
1916 262.898 71.091
1917 262.827 71.152
1918 262.756 71.214
1919 262.686 71.275
1920 262.615 71.337
1921 262.494 71.426
1922 262.374 71.516
1923 262.252 71.606
1924 262.13 71.696
1925 262.007 71.786
1926 261.872 71.881
1927 261.735 71.977
1928 261.597 72.073
1929 261.457 72.17
1930 261.317 72.268
1931 261.191 72.371
1932 261.064 72.475
1933 260.934 72.58
1934 260.802 72.687
1935 260.667 72.796
1936 260.564 72.894
1937 260.458 72.993
1938 260.351 73.093
1939 260.241 73.195
1940 260.129 73.299
1941 260.062 73.421
1942 259.992 73.544
1943 259.918 73.67
1944 259.842 73.797
1945 259.762 73.926
1946 259.643 74.066
1947 259.521 74.208
1948 259.397 74.35
1949 259.27 74.494
1950 259.141 74.638
1951 259.039 74.741
1952 258.932 74.848
1953 258.821 74.957
1954 258.704 75.069
1955 258.582 75.184
1956 258.658 75.208
1957 258.734 75.232
1958 258.812 75.255
1959 258.889 75.278
1960 258.967 75.301
1961 258.908 75.364
1962 258.848 75.429
1963 258.787 75.494
1964 258.725 75.56
1965 258.663 75.626
1966 258.735 75.677
1967 258.807 75.728
1968 258.88 75.778
1969 258.953 75.829
1970 259.026 75.878
1971 259.092 75.934
1972 259.158 75.989
1973 259.225 76.044
1974 259.293 76.098
1975 259.362 76.153
1976 259.158 76.303
1977 258.952 76.454
1978 258.745 76.604
1979 258.535 76.755
1980 258.323 76.906
1981 258.14 77.005
1982 257.956 77.104
1983 257.769 77.202
1984 257.581 77.3
1985 257.391 77.398
1986 257.184 77.537
1987 256.973 77.677
1988 256.757 77.816
1989 256.537 77.956
1990 256.311 78.095
1991 256.01 78.286
1992 255.699 78.476
1993 255.38 78.665
1994 255.05 78.854
1995 254.71 79.043
1996 253.995 79.417
1997 253.211 79.798
1998 252.35 80.185
1999 251.403 80.576
2000 250.36 80.972
2001 248.992 81.427
2002 247.468 81.879
2003 245.769 82.325
2004 243.881 82.762
2005 241.782 83.186
2006 239.408 83.602
2007 236.784 83.995
2008 233.9 84.363
2009 230.751 84.702
2010 227.166 85.02
2011 222.596 85.37
2012 217.521 85.676
2013 211.982 85.933
2014 206.059 86.138
2015 199.659 86.305
2016 192.206 86.467
2017 184.522 86.562
2018 176.901 86.598
2019 169.615 86.568
2020 162.867 86.494
2021 156.786 86.4
2022 151.272 86.275
2023 146.334 86.126
2024 141.945 85.958
2025 138.057 85.778

## Dataset Y:

1845 -0.0567 -0.1009
1846 -0.08665 0.06915
1847 -0.06655 0.06925
1848 0.13355 0.04935
1849 0.20365 -0.03055
1850 -0.03625 0.01955
1851 -0.01615 -0.18035
1852 -0.08605 0.08975
1853 0.19405 0.21985
1854 -0.02585 0.15995
1855 0.03425 -0.18995
1856 -0.04565 -0.18985
1857 0.17445 -0.34975
1858 0.11455 0.16035
1859 0.00465 0.0
1860 -0.18525 0.0
1861 -0.03515 -0.13935
1862 -0.18505 -0.17925
1863 0.15505 -0.05915
1864 0.06515 0.01095
1865 -0.09475 0.07105
1866 -0.13465 0.08115
1867 -0.20455 -0.14875
1868 0.10555 -0.24865
1869 0.27565 -0.00855
1870 0.13575 0.11155
1871 0.00585 0.06165
1872 -0.09405 -0.05825
1873 -0.12395 -0.01815
1874 0.01615 -0.24805
1875 0.18625 -0.19795
1876 0.10635 -0.09785
1877 0.11645 0.13225
1878 -0.03345 0.23235
1879 -0.16335 -0.05755
1880 -0.12325 0.02255
1881 0.04685 -0.12735
1882 -0.01305 -0.16725
1883 0.13705 -0.00715
1884 0.10715 0.01295
1885 -0.17275 0.05305
1886 -0.13265 -0.01685
1887 -0.03255 -0.07675
1888 0.06755 -0.08665
1889 0.26765 0.13345
1890 0.15475 0.02355
1891 0.04885 0.13465
1892 -0.12605 0.12175
1893 -0.16695 -0.03715
1894 -0.09085 -0.18005
1895 -0.00575 -0.19795
1896 0.09535 -0.01085
1897 -0.01755 0.06125
1898 -0.14745 0.09235
1899 -0.20935 -0.01355
1900 -0.034588 -0.035009
1901 0.138022 -0.028111
1902 0.192457 0.126472
1903 0.081316 0.254433
1904 0.000665 0.249472
1905 -0.11041 0.156573
1906 -0.120148 0.105355
1907 -0.041842 -0.054269
1908 0.183439 -0.054419
1909 0.260634 0.206498
1910 0.080249 0.428784
1911 -0.123902 0.414663
1912 -0.181735 0.124444
1913 0.020187 0.035106
1914 0.182912 0.095304
1915 0.191336 0.290238
1916 0.041254 0.34637
1917 -0.0323 0.307523
1918 -0.08784 0.263997
1919 0.014397 0.02041
1920 0.177642 0.092692
1921 0.151019 0.131325
1922 0.109848 0.218697
1923 0.035385 0.297607
1924 -0.039222 0.236371
1925 -0.000956 0.137143
1926 -0.017153 0.205262
1927 0.034751 0.151468
1928 -0.000507 0.148406
1929 0.130417 0.227941
1930 0.120258 0.243364
1931 0.100423 0.344429
1932 -0.022204 0.318189
1933 -0.055741 0.297213
1934 -0.040786 0.247264
1935 -0.005118 0.19915
1936 0.075072 0.240532
1937 0.0938 0.317058
1938 0.107517 0.349515
1939 0.082251 0.331486
1940 0.058994 0.376356
1941 -0.058351 0.274488
1942 -0.032989 0.230491
1943 0.102646 0.141584
1944 0.146144 0.215711
1945 0.156106 0.379177
1946 -0.042738 0.447091
1947 -0.119041 0.382202
1948 -0.046856 0.128667
1949 0.168456 0.05032
1950 0.29773 0.166464
1951 0.304302 0.412516
1952 0.089349 0.598154
1953 -0.106481 0.570233
1954 -0.171793 0.286109
1955 -0.004631 0.122471
1956 0.23587 0.149037
1957 0.265936 0.417675
1958 0.123085 0.538901
1959 -0.067068 0.484622
1960 -0.126138 0.317184
1961 0.012501 0.158164
1962 0.098375 0.114017
1963 0.220006 0.22662
1964 0.12409 0.415219
1965 -0.034649 0.430055
1966 -0.108328 0.282495
1967 -0.00483 0.175389
1968 0.065524 0.17341
1969 0.136279 0.262703
1970 0.130338 0.371122
1971 0.029557 0.463451
1972 -0.051512 0.374349
1973 -0.101494 0.268001
1974 0.003937 0.198894
1975 0.141628 0.228472
1976 0.157583 0.370359
1977 0.088168 0.479759
1978 -0.045227 0.473303
1979 -0.126888 0.341643
1980 -0.052946 0.280986
1981 0.067583 0.209771
1982 0.225641 0.234874
1983 0.270307 0.420282
1984 0.11822 0.543921
1985 -0.044952 0.482374
1986 -0.072179 0.326172
1987 -0.007425 0.207018
1988 0.16762 0.251595
1989 0.238023 0.364945
1990 0.166008 0.542142
1991 -0.027643 0.562997
1992 -0.141383 0.383128
1993 -0.063712 0.210917
1994 0.134612 0.210555
1995 0.281626 0.378525
1996 0.182139 0.545779
1997 0.022786 0.536332
1998 -0.065291 0.441048
1999 -0.030817 0.312254
2000 0.108854 0.279894
2001 0.253053 0.30535
2002 0.22853 0.458332
2003 0.134667 0.537304
2004 -0.006351 0.510618
2005 -0.038133 0.398321
2006 0.12785 0.298912
2007 0.20927 0.408177
2008 0.213121 0.496586
2009 0.133977 0.533085
2010 0.064442 0.483427
2011 0.046349 0.436618
2012 0.095058 0.408811
2013 0.144364 0.389963
2014 0.172401 0.414541
2015 0.144757 0.447415
2016 0.153549 0.483371
2017 0.15915 0.44959
2018 0.165166 0.428592
2019 0.159549 0.41918
2020 0.167889 0.430359
2021 0.206706 0.418862
2022 0.233064 0.459786
2023 0.187126 0.507931
2024 0.091817 0.47807
```

# TODO

Looks like I might be trying to do too many things in one script. Need to break down the processing steps separately and then plot the data together.
